!function(t,o){"object"==typeof exports&&"undefined"!=typeof module?module.exports=o():"function"==typeof define&&define.amd?define(o):t.chartjsWPluginWaterfall=o()}(this,function(){"use strict";var t=function(t,o,a){var s=_.groupBy(o,"stack"),e=[],n=function(t){return t._meta[0].data[0]._model};Object.keys(s).forEach(function(t){var o=s[t],a=n(o.find(function(t){return!t.dummyStack})),c=n(o[0]),r=n(o[o.length-1]);e.push({stackRightXPos:c.x+c.width/2,stackLeftXPos:c.x-c.width/2,stackRealBottomYPos:a.base,stackBottomYPos:c.base,stackTopYPos:r.y})});for(var c=0;c<e.length;c+=1){var r=e[c];if(c!==e.length-1){var l=e[c+1];r.stackTopYPos===l.stackRealBottomYPos?l.stackTopYPos=l.stackRealBottomYPos:r.stackRealBottomYPos===l.stackTopYPos&&(r.stackTopYPos=r.stackRealBottomYPos);var i=t.createLinearGradient(0,l.stackTopYPos,0,l.stackBottomYPos);i.addColorStop(a.startColorStop,a.startColor),i.addColorStop(a.endColorStop,a.endColor),t.fillStyle=i,t.beginPath(),t.lineTo(r.stackRightXPos,r.stackTopYPos),t.lineTo(l.stackLeftXPos,l.stackTopYPos),t.lineTo(l.stackLeftXPos,l.stackBottomYPos),t.lineTo(r.stackRightXPos,r.stackBottomYPos),t.fill()}}};return{beforeInit:function(t){t.data.datasets.forEach(function(t,o){t.label=t.label?t.label:"dummyStack_"+o,t.backgroundColor=t.dummyStack?"rgba(0, 0, 0, 0)":t.backgroundColor})},afterDraw:function(o){var a=o.options.plugins.waterFallPlugin;a.stepLines.enabled&&t(o.ctx,o.data.datasets,a.stepLines),o.update()}}});
//# sourceMappingURL=chartjs-plugin-waterfall.min.js.map
