!function(t,o){"object"==typeof exports&&"undefined"!=typeof module?module.exports=o(require("lodash.merge"),require("lodash.groupby")):"function"==typeof define&&define.amd?define(["lodash.merge","lodash.groupby"],o):t.chartjsWPluginWaterfall=o(t._.merge,t._.groupby)}(this,function(t,o){"use strict";t=t&&t.hasOwnProperty("default")?t.default:t,o=o&&o.hasOwnProperty("default")?o.default:o;var a=function(t,a,e){var s=o(a,"stack"),n=[],r=function(t){return t._meta[0].data[0]._model};Object.keys(s).forEach(function(t){var o=s[t],a=r(o.find(function(t){return!t.dummyStack})),e=r(o[0]),l=r(o[o.length-1]);n.push({stackRightXPos:e.x+e.width/2,stackLeftXPos:e.x-e.width/2,stackRealBottomYPos:a.base,stackBottomYPos:e.base,stackTopYPos:l.y})});for(var l=0;l<n.length;l+=1){var i=n[l];if(l!==n.length-1){var c=n[l+1];i.stackTopYPos===c.stackRealBottomYPos?c.stackTopYPos=c.stackRealBottomYPos:i.stackRealBottomYPos===c.stackTopYPos&&(i.stackTopYPos=i.stackRealBottomYPos);var d=t.createLinearGradient(0,c.stackTopYPos,0,c.stackBottomYPos);d.addColorStop(e.startColorStop,e.startColor),d.addColorStop(e.endColorStop,e.endColor),t.fillStyle=d,t.beginPath(),t.lineTo(i.stackRightXPos,i.stackTopYPos),t.lineTo(c.stackLeftXPos,c.stackTopYPos),t.lineTo(c.stackLeftXPos,c.stackBottomYPos),t.lineTo(i.stackRightXPos,i.stackBottomYPos),t.fill()}}},e={waterFallPlugin:{stepLines:{enabled:!0,startColorStop:0,endColorStop:.6,startColor:"rgba(0, 0, 0, 0.55)",endColor:"rgba(0, 0, 0, 0)"}}},s=function(t,o){return!o.datasets[t.datasetIndex].dummyStack};return{afterInit:function(o){o.options.tooltips.filter=s,o.options.legend.labels.filter=s,o.options.plugins=t({},e,o.options.plugins),o.data.datasets.forEach(function(t,o){t.dummyStack&&(t.label="dummyStack_"+o,t.backgroundColor="rgba(0, 0, 0, 0)")})},afterDraw:function(t){var o=t.options.plugins.waterFallPlugin;o.stepLines.enabled&&a(t.ctx,t.data.datasets,o.stepLines)}}});
//# sourceMappingURL=chartjs-plugin-waterfall.min.js.map
